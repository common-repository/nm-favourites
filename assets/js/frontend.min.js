var nm_favourites=function(t){"use strict";function e(t){var e=jQuery(t),a=JSON.parse(t.dataset.options),o={show:200,hide:200,minHeight:0,modal:!0,open:function(){var t=jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close");if(t.addClass("ui-button"),jQuery(".ui-widget-overlay").on("click",(function(){e.dialog("close")})),"toast"===a.type&&(t.attr("tabindex",-1),setTimeout((function(){e.dialog("instance")&&e.dialog("close")}),5e3)),jQuery.ui&&jQuery.ui.dialog&&jQuery.ui.dialog.prototype._allowInteraction){var o=jQuery.ui.dialog.prototype._allowInteraction;jQuery.ui.dialog.prototype._allowInteraction=function(t){return!!jQuery(t.target).is(".select2-search__field")||o.apply(this,arguments)}}},close:function(){e.dialog("destroy")}};o=Object.assign(o,a),e.dialog(o)}function a(t,a){var o,n,i,r,s,c,u;t.log&&console.log(t),a&&a.block&&(o=a.block,(Array.isArray(o)?o:[o]).forEach((function(t){jQuery(t).removeClass("nm-favourites-loading")}))),(a&&a.close_dialog||t.close_dialog)&&(n=jQuery(".ui-dialog.modal").find(".ui-dialog-content").prop("id"),jQuery("#"+n).dialog("close")),t.show_template&&(i=t.show_template,e(jQuery(i)[0])),t.toast_notice&&(r=t.toast_notice,s=r instanceof Array?r:[r],c="nm-favourites-toaster",document.querySelector("."+c)||jQuery(document.body).append('<div class="'+c+'"></div>'),s.forEach((function(t){e(jQuery(t)[0])}))),t.replace_templates&&function(t){for(var e in t){var a=document.querySelectorAll(e);if(a){var o=t[e];a.forEach((function(t){var a=document.createElement("template");a.innerHTML=o;var n=a.content.children[0];n=void 0===n?"":n,t.replaceWith(n),jQuery(document.body).trigger("nm_favourites_replaced_template",{key:e,template:n})}))}}}(t.replace_templates),t.redirect&&(-1===(u=t.redirect).indexOf("https://")||-1===u.indexOf("http://")?window.location=u:window.location=decodeURI(u))}function o(t){if(t.btn&&t.btn.dataset&&(t.btn.dataset.alert&&!window.alert(t.btn.dataset.alert)||t.btn.dataset.confirm&&!window.confirm(t.btn.dataset.confirm)))return!1;var e;if(t.block&&(e=t.block,(Array.isArray(e)?e:[e]).forEach((function(t){jQuery(e).is("nm-favourites-loading")||jQuery(e).parents(".nm-favourites-loading").length||jQuery(t).addClass("nm-favourites-loading")}))),t.postdata){var o={action:"nm_favourites_post_action",_wpnonce:nm_favourites_vars.nonce,ajax_url:nm_favourites_vars.ajax_url},n=Object.assign({},o,t.postdata),i={url:n.ajax_url,data:n,success:function(e){return e=e||{},delete n.action,delete n._wpnonce,e.postdata=n,a(e,t),jQuery(document.body).trigger("nm_favourites_post_action_response",e),e}};return jQuery.post(i)}}var n=jQuery;return n(document.body).on("click",".nm-favourites-category .edit_cat",(function(t){t.preventDefault(),n("#nm_favourites_cat_info").toggle(),n("#nm_favourites_cat_update").toggle(),n("#nm_favourites_cat_update :input[type!=hidden]:first").focus()})),n(document.body).on("click",".nm-favourites-category .save_cat",(function(){var t=n("#nm_favourites_cat_update"),e={block:t,postdata:{formdata:t.serialize(),nm_favourites_post_action:"save_category"}};nm_favourites.postAction(e).done((function(t){t.replace_templates&&n("#nm_favourites_cat_update").hide()}))})),n(document.body).on("click",".nm_favourites_shortcode_1",(function(t){if(t.preventDefault(),this.dataset.confirm&&!confirm(this.dataset.confirm))return!1;var e=this;this.dataset.location&&"table"===this.dataset.location&&(e=this.closest("tr"));var a={block:e,postdata:Object.assign({},this.dataset)};nm_favourites.postAction(a)})),n(document.body).on("click",".nm_favourites_nav",(function(t){t.preventDefault();var e="#"+this.dataset.target_id,a={block:e,postdata:{nm_favourites_post_action:"paginate",table_dataset:n(e)[0].dataset,direction:this.dataset.action}};nm_favourites.postAction(a)})),jQuery(document.body).on("click",'[data-autopost="1"][data-nm_favourites_post_action]',(function(){o({btn:this,block:[this],postdata:Object.assign({},this.dataset)})})),t.postAction=o,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
