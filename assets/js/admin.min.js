!function(){"use strict";function t(t){var e=jQuery(t),o=JSON.parse(t.dataset.options),a={show:200,hide:200,minHeight:0,modal:!0,open:function(){var t=jQuery(this).closest(".ui-dialog").find(".ui-dialog-titlebar-close");if(t.addClass("ui-button"),jQuery(".ui-widget-overlay").on("click",(function(){e.dialog("close")})),"toast"===o.type&&(t.attr("tabindex",-1),setTimeout((function(){e.dialog("instance")&&e.dialog("close")}),5e3)),jQuery.ui&&jQuery.ui.dialog&&jQuery.ui.dialog.prototype._allowInteraction){var a=jQuery.ui.dialog.prototype._allowInteraction;jQuery.ui.dialog.prototype._allowInteraction=function(t){return!!jQuery(t.target).is(".select2-search__field")||a.apply(this,arguments)}}},close:function(){e.dialog("destroy")}};a=Object.assign(a,o),e.dialog(a)}function e(e,o){var a,n,i,s,c,r,l;e.log&&console.log(e),o&&o.block&&(a=o.block,(Array.isArray(a)?a:[a]).forEach((function(t){jQuery(t).removeClass("nm-favourites-loading")}))),(o&&o.close_dialog||e.close_dialog)&&(n=jQuery(".ui-dialog.modal").find(".ui-dialog-content").prop("id"),jQuery("#"+n).dialog("close")),e.show_template&&(i=e.show_template,t(jQuery(i)[0])),e.toast_notice&&(s=e.toast_notice,c=s instanceof Array?s:[s],r="nm-favourites-toaster",document.querySelector("."+r)||jQuery(document.body).append('<div class="'+r+'"></div>'),c.forEach((function(e){t(jQuery(e)[0])}))),e.replace_templates&&function(t){for(var e in t){var o=document.querySelectorAll(e);if(o){var a=t[e];o.forEach((function(t){var o=document.createElement("template");o.innerHTML=a;var n=o.content.children[0];n=void 0===n?"":n,t.replaceWith(n),jQuery(document.body).trigger("nm_favourites_replaced_template",{key:e,template:n})}))}}}(e.replace_templates),e.redirect&&(-1===(l=e.redirect).indexOf("https://")||-1===l.indexOf("http://")?window.location=l:window.location=decodeURI(l))}function o(t){if(t.btn&&t.btn.dataset&&(t.btn.dataset.alert&&!window.alert(t.btn.dataset.alert)||t.btn.dataset.confirm&&!window.confirm(t.btn.dataset.confirm)))return!1;var o;if(t.block&&(o=t.block,(Array.isArray(o)?o:[o]).forEach((function(t){jQuery(o).is("nm-favourites-loading")||jQuery(o).parents(".nm-favourites-loading").length||jQuery(t).addClass("nm-favourites-loading")}))),t.postdata){var a={action:"nm_favourites_post_action",_wpnonce:nm_favourites_vars.nonce,ajax_url:nm_favourites_vars.ajax_url},n=Object.assign({},a,t.postdata),i={url:n.ajax_url,data:n,success:function(o){return o=o||{},delete n.action,delete n._wpnonce,o.postdata=n,e(o,t),jQuery(document.body).trigger("nm_favourites_post_action_response",o),o}};return jQuery.post(i)}}jQuery((function(t){var e={init:function(){try{t(document.body).on("nm-favourites-select2-init",this.activate_select2).trigger("nm-favourites-select2-init")}catch(t){window.console.log(t)}},activate_select2:function(){t(".nm-favourites-select2").select2(),e.post_search()},post_search:function(){t(":input.nm-favourites-object-search").each((function(){var e={ajax:{url:t(this).data("ajax_url"),dataType:"json",delay:250,cache:!0,method:"POST",data:function(e){return{term:e.term,action:"nm_favourites_post_action",nm_favourites_post_action:t(this).data("action"),post_types:t(this).attr("data-post_types"),_wpnonce:t(this).data("nonce")}},processResults:function(e){var o=[];return e&&t.each(e,(function(t,e){o.push({id:t,text:e})})),{results:o}}}};t(this).select2(e)}))}};function a(){var e=t("select#object_type").val();-1!==["comment"].indexOf(e)?t("fieldset#include_exclude").attr("disabled",!0).closest(".postbox").hide():t("fieldset#include_exclude").attr("disabled",!1).closest(".postbox").show()}e.init(),t(document.body).on("click","#doaction, #doaction2",(function(){var e=t(this),o=t('.check-column input[type="checkbox"]:checked'),a=e.is("#doaction")?"top":"bottom",n=t("select#bulk-action-selector-"+a).val();if(0<o.length&&-1!==["delete","delete_tags"].indexOf(n))return showNotice.warn()})),t(document.body).on("change","select#parent",(function(){var e=t(".category_button_fields");""===this.value?e.show().find("fieldset").attr("disabled",!1):e.hide().find("fieldset").attr("disabled",!0)})),t(document.body).on("change","select#post_types",(function(){t(".nm-favourites-object-search").attr("data-post_types",JSON.stringify(t(this).val()))})),t("select#post_types").trigger("change"),t(document.body).on("change",".nm-favourites-custom-btn",(function(){var e=this.closest("section"),o=t(".nm-favourites-custom-btn-toggle",e);!0===this.checked?o.show():o.hide()})),t(".nm-favourites-custom-btn").trigger("change"),a(),t(document.body).on("change","select#object_type",(function(){a();var e=t("select#post_types");if(-1!==["product"].indexOf(this.value))for(var n of e[0].options)this.value===n.value&&e.val(this.value).select2().trigger("change");o({btn:this,block:[this,"select#display\\[display_1\\]\\[position\\]"],postdata:{object_type:this.value,nm_favourites_post_action:"object_type_selected"}})}))}))}();
